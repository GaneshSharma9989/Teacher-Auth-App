<app-header></app-header>

<h2>{{ newStudent.id ? 'Update Student' : 'Add New Student' }}</h2>
<form #formRef="ngForm" (ngSubmit)="newStudent.id ? updateStudent() : addStudent()" novalidate>
  <input type="text" [(ngModel)]="newStudent.name" name="name" placeholder="Student Name" required />
  <input type="text" [(ngModel)]="newStudent.class_name" name="class_name" placeholder="Class" required />
  <input type="text" [(ngModel)]="newStudent.section" name="section" placeholder="Section" required />
<button type="submit" [disabled]="formRef.invalid">
    {{ newStudent.id ? 'Update Student' : 'Add Student' }}
  </button>

  <button type="button" (click)="clearForm()" *ngIf="newStudent.id">Cancel</button>
</form>
<h2>All Students</h2>
<table border="1" style="margin-top: 10px;">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Class</th>
      <th>Section</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let student of students">
      <td>{{ student.id }}</td>
      <td>{{ student.name }}</td>
      <td>{{ student.class_name }}</td>
      <td>{{ student.section }}</td>
      <td>
        <button (click)="editStudent(student)">Edit</button>
        <button (click)="deleteStudent(student.id)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>

<div style="margin-top: 10px;">
  <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">Previous</button>
  Page {{ currentPage }} of {{ totalPages }}
  <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
</div>

<div style="margin: 15px 0;">
  <label>
    Class:
    <input type="text" [(ngModel)]="classFilter" (input)="onFilterChange()" placeholder="Enter class" />
  </label>

  <label style="margin-left: 20px;">
    Section:
    <input type="text" [(ngModel)]="sectionFilter" (input)="onFilterChange()" placeholder="Enter section" />
  </label>
</div>












<!-- ðŸ”½ Dropdown Filters -->
<div style="margin: 15px 0;">
  <label>
    Class:
    <select [(ngModel)]="classFilter" (change)="onFilterChange()">
      <option value="">All</option>
      <option *ngFor="let cls of classOptions" [value]="cls">{{ cls }}</option>
    </select>
  </label>

  <label style="margin-left: 20px;">
    Section:
    <select [(ngModel)]="sectionFilter" (change)="onFilterChange()">
      <option value="">All</option>
      <option *ngFor="let sec of sectionOptions" [value]="sec">{{ sec }}</option>
    </select>
  </label>
</div>